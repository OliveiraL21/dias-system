<div class="justify-content-center align-item-center h-full mt-5">
  <p-toast position="top-right"></p-toast>
  <p-confirmDialog></p-confirmDialog>
  <p-blockUI [blocked]="loading">
    <p-progressSpinner styleClass="w-4rem h-4rem" strokeWidth="8" fill="var(--surface-ground)"
      animationDuration=".5s"></p-progressSpinner>
  </p-blockUI>
  <p-card header="projetos">

    <app-filter [formControls]="getCustomFilter()" (filtrarChange)="filtrar($event)"></app-filter>

    <div class="flex justify-content-end w-full mb-5">
      <p-button label="Novo Projeto" icon="pi pi-plus" [rounded]="true" size="small" iconPos="right"
        (onClick)="novo()"></p-button>
    </div>

    <p-table [value]="projetos" styleClass="p-datatable-striped" [tableStyle]="{'min-width': '50rem'}">
      <ng-template pTemplate="header">
        <tr>
          <th>Descrição</th>
          <th class="text-center">Cliente</th>
          <th class="text-center">Data Inicio</th>
          <th class="text-center">Data Fim</th>
          <th class="text-center">Status</th>
          <th class="text-center">Ações</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-projeto>
        <tr>
          <td>{{projeto.descricao}}</td>
          <td class="text-center">{{projeto.cliente.razaoSocial}}</td>
          <td class="text-center">{{projeto.dataInicio | date: 'dd/MM/yyyy'}}</td>
          <td class="text-center">{{projeto.dataFim | date: 'dd/MM/yyyy'}}</td>
          <td class="text-center lg:w-2">
            <p-tag *ngIf="projeto.status.descricao == 'Em andamento' " [value]="projeto.status.descricao"></p-tag>

            <p-tag *ngIf="projeto.status.descricao == 'Inativo' " [value]="projeto.status.descricao"
              [severity]="'warning'"></p-tag>

            <p-tag *ngIf="projeto.status.descricao == 'Excluído' " [value]="projeto.status.descricao"
              [severity]="'danger'"></p-tag>

            <p-tag *ngIf="projeto.status.descricao == 'Finalizado' " [value]="projeto.status.descricao"
              [severity]="'success'"></p-tag>

            <p-tag *ngIf="projeto.status.descricao == 'Em pausa' " [value]="projeto.status.descricao"
              [severity]="'warning'"></p-tag>

            <p-tag *ngIf="projeto.status.descricao == 'Bloqueado' " [value]="projeto.status.descricao"
              [severity]="'danger'"></p-tag>
          </td>
          <td class="text-center">
            <div class="flex gap-2 lg:w-2">
              <p-button icon="pi pi-pencil" [text]="true" (onClick)="editar(projeto.id)"></p-button>
              <p-button icon="pi pi-trash" [text]="true" severity="danger"
                (onClick)="deletar($event, projeto.id)"></p-button>
              <app-button-tired-menu [finalizarSplitButtonItems]="buttonTiredItems"
                (openPopupEmitter)="openPopup($event, projeto)"></app-button-tired-menu>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>


  </p-card>
</div>
